button_card_templates:
  base_chip:
    show_state: false
    show_label: false
    aspect_ratio: 1.7/1
    styles:
      card:
        - border-radius: 14px
        - padding: 10px 8px
        - box-shadow: none
        - border: 1px solid rgba(var(--rgb-primary-text-color), 0.08)
        - background: rgba(var(--rgb-card-background-color), 0.95)
        - gap: 6px
      name:
        - font-size: 14px
        - font-weight: 600
        - letter-spacing: 0.04em
        - text-transform: uppercase
        - color: var(--secondary-text-color)
      label:
        - font-size: 11px
        - color: var(--secondary-text-color)
      icon:
        - width: 24px
        - color: var(--secondary-text-color)
    hold_action:
      action: none
    double_tap_action:
      action: none
  scene_chip:
    template: base_chip
    size: 22px
  info_chip:
    template: base_chip
    show_state: true
    styles:
      name:
        - font-size: 12px
        - font-weight: 600
        - letter-spacing: 0.02em
        - color: var(--secondary-text-color)
      state:
        - font-size: 18px
        - font-weight: 600
        - color: var(--primary-text-color)
  setpoint_action:
    template: base_chip
    aspect_ratio: 1.8/1
    show_label: true
    styles:
      name:
        - font-size: 13px
        - font-weight: 600
        - color: var(--secondary-text-color)
  setpoint_display:
    template: base_chip
    aspect_ratio: 1.8/1
    show_state: true
    state_display: >
      [[[ const value = Number(entity?.state ?? NaN); if (!Number.isFinite(value)) { return '—'; } const formatted = Number.isInteger(value) ? value.toFixed(0) : value.toFixed(1); return `${formatted} °C`; ]]]
    tap_action:
      action: none
    styles:
      name:
        - font-size: 11px
        - font-weight: 600
        - color: var(--secondary-text-color)
      state:
        - font-size: 20px
        - font-weight: 600
        - color: var(--primary-text-color)
views:
  - title: Wall Control (Compact)
    path: wall-compact
    icon: mdi:home-lightning-bolt
    type: sections
    theme: "Shelly Wall Light"
    max_columns: 1
    sections:

      # ===== Entrance Hall =====
      - type: grid
        columns: 1
        square: false
        cards:
          - type: custom:mushroom-title-card
            title: Entrance Hall
            subtitle: "{{ states('sensor.entrance_hall_temperature') }} °C | {{ states('sensor.entrance_hall_power') }} W"
            icon: mdi:door
            tap_action: none
            hold_action: none
            double_tap_action: none

          - type: grid
            columns: 5
            square: false
            cards:
              - type: custom:button-card
                entity: input_select.scene_entrance_hall
                template: scene_chip
                name: Off
                icon: mdi:power-standby
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🔴 OFF"
                  target:
                    entity_id: input_select.scene_entrance_hall
                state:
                  - value: "🔴 OFF"
                    styles:
                      card:
                        - border: 1px solid rgba(244, 67, 54, 0.6)
                        - background: rgba(244, 67, 54, 0.18)
                      icon:
                        - color: rgb(244, 67, 54)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_entrance_hall
                template: scene_chip
                name: Bright
                icon: mdi:white-balance-sunny
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "☀️ BRIGHT"
                  target:
                    entity_id: input_select.scene_entrance_hall
                state:
                  - value: "☀️ BRIGHT"
                    styles:
                      card:
                        - border: 1px solid rgba(255, 193, 7, 0.55)
                        - background: rgba(255, 193, 7, 0.22)
                      icon:
                        - color: rgb(255, 193, 7)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_entrance_hall
                template: scene_chip
                name: Warm
                icon: mdi:weather-partly-cloudy
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🌤️ WARM"
                  target:
                    entity_id: input_select.scene_entrance_hall
                state:
                  - value: "🌤️ WARM"
                    styles:
                      card:
                        - border: 1px solid rgba(255, 152, 0, 0.55)
                        - background: rgba(255, 152, 0, 0.22)
                      icon:
                        - color: rgb(255, 152, 0)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_entrance_hall
                template: scene_chip
                name: Cool
                icon: mdi:snowflake
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "❄️ COOL"
                  target:
                    entity_id: input_select.scene_entrance_hall
                state:
                  - value: "❄️ COOL"
                    styles:
                      card:
                        - border: 1px solid rgba(41, 182, 246, 0.55)
                        - background: rgba(41, 182, 246, 0.2)
                      icon:
                        - color: rgb(41, 182, 246)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_entrance_hall
                template: scene_chip
                name: Clean
                icon: mdi:broom
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🧹 CLEAN"
                  target:
                    entity_id: input_select.scene_entrance_hall
                state:
                  - value: "🧹 CLEAN"
                    styles:
                      card:
                        - border: 1px solid rgba(0, 191, 165, 0.55)
                        - background: rgba(0, 191, 165, 0.22)
                      icon:
                        - color: rgb(0, 191, 165)
                      name:
                        - color: var(--primary-text-color)

          - type: grid
            columns: 3
            square: false
            cards:
              - type: custom:button-card
                template: setpoint_action
                name: Cooler
                label: "-0.5 °C"
                icon: mdi:thermometer-minus
                tap_action:
                  action: call-service
                  service: script.setpoint_entrance_hall_dec
                styles:
                  icon:
                    - color: rgb(41, 121, 255)
                  name:
                    - color: var(--primary-text-color)
                  label:
                    - color: var(--secondary-text-color)
              - type: custom:button-card
                template: setpoint_display
                entity: input_number.temp_entrance_hall_setpoint
                icon: mdi:radiator
                name: Setpoint
                styles:
                  icon:
                    - color: rgb(255, 152, 0)
              - type: custom:button-card
                template: setpoint_action
                name: Warmer
                label: "+0.5 °C"
                icon: mdi:thermometer-plus
                tap_action:
                  action: call-service
                  service: script.setpoint_entrance_hall_inc
                styles:
                  icon:
                    - color: rgb(255, 111, 0)
                  name:
                    - color: var(--primary-text-color)
                  label:
                    - color: var(--secondary-text-color)

          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:button-card
                template: info_chip
                entity: input_boolean.presence_entrance_hall
                name: Occupancy
                icon: mdi:account-group
                state_display: >
                  [[[ return entity && entity.state === 'on' ? 'Occupied' : 'Vacant'; ]]]
                state:
                  - value: "on"
                    styles:
                      card:
                        - border: 1px solid rgba(0, 150, 136, 0.55)
                        - background: rgba(0, 150, 136, 0.15)
                      icon:
                        - color: rgb(0, 150, 136)
                      name:
                        - color: var(--primary-text-color)
                      state:
                        - color: var(--primary-text-color)
                  - value: "off"
                    styles:
                      card:
                        - border: 1px solid rgba(var(--rgb-secondary-text-color), 0.18)
                        - background: rgba(var(--rgb-card-background-color), 0.9)
                      icon:
                        - color: rgba(var(--rgb-secondary-text-color), 0.6)
                      state:
                        - color: rgba(var(--rgb-secondary-text-color), 0.85)
              - type: custom:button-card
                template: info_chip
                entity: sensor.entrance_hall_co2
                name: CO₂
                icon: mdi:molecule-co2
                state_display: >
                  [[[ const value = Number(entity?.state); return Number.isFinite(value) ? `${value} ppm` : '—'; ]]]
                state:
                  - operator: template
                    value: >
                      [[[ return Number(entity?.state) >= 1000; ]]]
                    styles:
                      card:
                        - border: 1px solid rgba(244, 67, 54, 0.55)
                        - background: rgba(244, 67, 54, 0.16)
                      icon:
                        - color: rgb(244, 67, 54)
                      state:
                        - color: rgb(244, 67, 54)

      # ===== Reception (with blinds) =====
      - type: grid
        columns: 1
        square: false
        cards:
          - type: custom:mushroom-title-card
            title: Reception
            subtitle: "{{ states('sensor.reception_temperature') }} °C | {{ states('sensor.reception_power') }} W"
            icon: mdi:sofa
            tap_action: none
            hold_action: none
            double_tap_action: none

          - type: grid
            columns: 5
            square: false
            cards:
              - type: custom:button-card
                entity: input_select.scene_reception
                template: scene_chip
                name: Off
                icon: mdi:power-standby
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🔴 OFF"
                  target:
                    entity_id: input_select.scene_reception
                state:
                  - value: "🔴 OFF"
                    styles:
                      card:
                        - border: 1px solid rgba(244, 67, 54, 0.6)
                        - background: rgba(244, 67, 54, 0.18)
                      icon:
                        - color: rgb(244, 67, 54)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_reception
                template: scene_chip
                name: Bright
                icon: mdi:white-balance-sunny
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "☀️ BRIGHT"
                  target:
                    entity_id: input_select.scene_reception
                state:
                  - value: "☀️ BRIGHT"
                    styles:
                      card:
                        - border: 1px solid rgba(255, 193, 7, 0.55)
                        - background: rgba(255, 193, 7, 0.22)
                      icon:
                        - color: rgb(255, 193, 7)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_reception
                template: scene_chip
                name: Warm
                icon: mdi:weather-partly-cloudy
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🌤️ WARM"
                  target:
                    entity_id: input_select.scene_reception
                state:
                  - value: "🌤️ WARM"
                    styles:
                      card:
                        - border: 1px solid rgba(255, 152, 0, 0.55)
                        - background: rgba(255, 152, 0, 0.22)
                      icon:
                        - color: rgb(255, 152, 0)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_reception
                template: scene_chip
                name: Cool
                icon: mdi:snowflake
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "❄️ COOL"
                  target:
                    entity_id: input_select.scene_reception
                state:
                  - value: "❄️ COOL"
                    styles:
                      card:
                        - border: 1px solid rgba(41, 182, 246, 0.55)
                        - background: rgba(41, 182, 246, 0.2)
                      icon:
                        - color: rgb(41, 182, 246)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_reception
                template: scene_chip
                name: Clean
                icon: mdi:broom
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🧹 CLEAN"
                  target:
                    entity_id: input_select.scene_reception
                state:
                  - value: "🧹 CLEAN"
                    styles:
                      card:
                        - border: 1px solid rgba(0, 191, 165, 0.55)
                        - background: rgba(0, 191, 165, 0.22)
                      icon:
                        - color: rgb(0, 191, 165)
                      name:
                        - color: var(--primary-text-color)

          - type: grid
            columns: 3
            square: false
            cards:
              - type: custom:button-card
                template: setpoint_action
                name: Cooler
                label: "-0.5 °C"
                icon: mdi:thermometer-minus
                tap_action:
                  action: call-service
                  service: script.setpoint_reception_dec
                styles:
                  icon:
                    - color: rgb(41, 121, 255)
                  name:
                    - color: var(--primary-text-color)
                  label:
                    - color: var(--secondary-text-color)
              - type: custom:button-card
                template: setpoint_display
                entity: input_number.temp_reception_setpoint
                icon: mdi:radiator
                name: Setpoint
                styles:
                  icon:
                    - color: rgb(255, 152, 0)
              - type: custom:button-card
                template: setpoint_action
                name: Warmer
                label: "+0.5 °C"
                icon: mdi:thermometer-plus
                tap_action:
                  action: call-service
                  service: script.setpoint_reception_inc
                styles:
                  icon:
                    - color: rgb(255, 111, 0)
                  name:
                    - color: var(--primary-text-color)
                  label:
                    - color: var(--secondary-text-color)

          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:button-card
                template: info_chip
                entity: input_boolean.presence_reception
                name: Occupancy
                icon: mdi:account-group
                state_display: >
                  [[[ return entity && entity.state === 'on' ? 'Occupied' : 'Vacant'; ]]]
                state:
                  - value: "on"
                    styles:
                      card:
                        - border: 1px solid rgba(0, 150, 136, 0.55)
                        - background: rgba(0, 150, 136, 0.15)
                      icon:
                        - color: rgb(0, 150, 136)
                      name:
                        - color: var(--primary-text-color)
                      state:
                        - color: var(--primary-text-color)
                  - value: "off"
                    styles:
                      card:
                        - border: 1px solid rgba(var(--rgb-secondary-text-color), 0.18)
                        - background: rgba(var(--rgb-card-background-color), 0.9)
                      icon:
                        - color: rgba(var(--rgb-secondary-text-color), 0.6)
                      state:
                        - color: rgba(var(--rgb-secondary-text-color), 0.85)
              - type: custom:button-card
                template: info_chip
                entity: sensor.reception_co2
                name: CO₂
                icon: mdi:molecule-co2
                state_display: >
                  [[[ const value = Number(entity?.state); return Number.isFinite(value) ? `${value} ppm` : '—'; ]]]
                state:
                  - operator: template
                    value: >
                      [[[ return Number(entity?.state) >= 1000; ]]]
                    styles:
                      card:
                        - border: 1px solid rgba(244, 67, 54, 0.55)
                        - background: rgba(244, 67, 54, 0.16)
                      icon:
                        - color: rgb(244, 67, 54)
                      state:
                        - color: rgb(244, 67, 54)

          - type: custom:mushroom-cover-card
            entity: cover.reception_blind
            name: Reception Blind
            show_position_control: true
            show_buttons_control: true
            fill_container: true
            tap_action: none
            hold_action: none
            double_tap_action: none

      # ===== Hallway GF (with blinds) =====
      - type: grid
        columns: 1
        square: false
        cards:
          - type: custom:mushroom-title-card
            title: Hallway GF
            subtitle: "{{ states('sensor.hall_gf_temperature') }} °C | {{ states('sensor.hall_gf_power') }} W"
            icon: mdi:stairs
            tap_action: none
            hold_action: none
            double_tap_action: none

          - type: grid
            columns: 5
            square: false
            cards:
              - type: custom:button-card
                entity: input_select.scene_hall_gf
                template: scene_chip
                name: Off
                icon: mdi:power-standby
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🔴 OFF"
                  target:
                    entity_id: input_select.scene_hall_gf
                state:
                  - value: "🔴 OFF"
                    styles:
                      card:
                        - border: 1px solid rgba(244, 67, 54, 0.6)
                        - background: rgba(244, 67, 54, 0.18)
                      icon:
                        - color: rgb(244, 67, 54)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_hall_gf
                template: scene_chip
                name: Bright
                icon: mdi:white-balance-sunny
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "☀️ BRIGHT"
                  target:
                    entity_id: input_select.scene_hall_gf
                state:
                  - value: "☀️ BRIGHT"
                    styles:
                      card:
                        - border: 1px solid rgba(255, 193, 7, 0.55)
                        - background: rgba(255, 193, 7, 0.22)
                      icon:
                        - color: rgb(255, 193, 7)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_hall_gf
                template: scene_chip
                name: Warm
                icon: mdi:weather-partly-cloudy
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🌤️ WARM"
                  target:
                    entity_id: input_select.scene_hall_gf
                state:
                  - value: "🌤️ WARM"
                    styles:
                      card:
                        - border: 1px solid rgba(255, 152, 0, 0.55)
                        - background: rgba(255, 152, 0, 0.22)
                      icon:
                        - color: rgb(255, 152, 0)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_hall_gf
                template: scene_chip
                name: Cool
                icon: mdi:snowflake
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "❄️ COOL"
                  target:
                    entity_id: input_select.scene_hall_gf
                state:
                  - value: "❄️ COOL"
                    styles:
                      card:
                        - border: 1px solid rgba(41, 182, 246, 0.55)
                        - background: rgba(41, 182, 246, 0.2)
                      icon:
                        - color: rgb(41, 182, 246)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_hall_gf
                template: scene_chip
                name: Clean
                icon: mdi:broom
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🧹 CLEAN"
                  target:
                    entity_id: input_select.scene_hall_gf
                state:
                  - value: "🧹 CLEAN"
                    styles:
                      card:
                        - border: 1px solid rgba(0, 191, 165, 0.55)
                        - background: rgba(0, 191, 165, 0.22)
                      icon:
                        - color: rgb(0, 191, 165)
                      name:
                        - color: var(--primary-text-color)

          - type: grid
            columns: 3
            square: false
            cards:
              - type: custom:button-card
                template: setpoint_action
                name: Cooler
                label: "-0.5 °C"
                icon: mdi:thermometer-minus
                tap_action:
                  action: call-service
                  service: script.setpoint_hall_gf_dec
                styles:
                  icon:
                    - color: rgb(41, 121, 255)
                  name:
                    - color: var(--primary-text-color)
                  label:
                    - color: var(--secondary-text-color)
              - type: custom:button-card
                template: setpoint_display
                entity: input_number.temp_hall_gf_setpoint
                icon: mdi:radiator
                name: Setpoint
                styles:
                  icon:
                    - color: rgb(255, 152, 0)
              - type: custom:button-card
                template: setpoint_action
                name: Warmer
                label: "+0.5 °C"
                icon: mdi:thermometer-plus
                tap_action:
                  action: call-service
                  service: script.setpoint_hall_gf_inc
                styles:
                  icon:
                    - color: rgb(255, 111, 0)
                  name:
                    - color: var(--primary-text-color)
                  label:
                    - color: var(--secondary-text-color)

          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:button-card
                template: info_chip
                entity: input_boolean.presence_hall_gf
                name: Occupancy
                icon: mdi:account-group
                state_display: >
                  [[[ return entity && entity.state === 'on' ? 'Occupied' : 'Vacant'; ]]]
                state:
                  - value: "on"
                    styles:
                      card:
                        - border: 1px solid rgba(0, 150, 136, 0.55)
                        - background: rgba(0, 150, 136, 0.15)
                      icon:
                        - color: rgb(0, 150, 136)
                      name:
                        - color: var(--primary-text-color)
                      state:
                        - color: var(--primary-text-color)
                  - value: "off"
                    styles:
                      card:
                        - border: 1px solid rgba(var(--rgb-secondary-text-color), 0.18)
                        - background: rgba(var(--rgb-card-background-color), 0.9)
                      icon:
                        - color: rgba(var(--rgb-secondary-text-color), 0.6)
                      state:
                        - color: rgba(var(--rgb-secondary-text-color), 0.85)
              - type: custom:button-card
                template: info_chip
                entity: sensor.hall_gf_co2
                name: CO₂
                icon: mdi:molecule-co2
                state_display: >
                  [[[ const value = Number(entity?.state); return Number.isFinite(value) ? `${value} ppm` : '—'; ]]]
                state:
                  - operator: template
                    value: >
                      [[[ return Number(entity?.state) >= 1000; ]]]
                    styles:
                      card:
                        - border: 1px solid rgba(244, 67, 54, 0.55)
                        - background: rgba(244, 67, 54, 0.16)
                      icon:
                        - color: rgb(244, 67, 54)
                      state:
                        - color: rgb(244, 67, 54)

          - type: custom:mushroom-cover-card
            entity: cover.hall_gf_blind
            name: Hall GF Blind
            show_position_control: true
            show_buttons_control: true
            fill_container: true
            tap_action: none
            hold_action: none
            double_tap_action: none

      # ===== Library (with blinds) =====
      - type: grid
        columns: 1
        square: false
        cards:
          - type: custom:mushroom-title-card
            title: Library
            subtitle: "{{ states('sensor.library_temperature') }} °C | {{ states('sensor.library_power') }} W"
            icon: mdi:bookshelf
            tap_action: none
            hold_action: none
            double_tap_action: none

          - type: grid
            columns: 4
            square: false
            cards:
              - type: custom:button-card
                entity: input_select.scene_library
                template: scene_chip
                name: Off
                icon: mdi:power-standby
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🔴 OFF"
                  target:
                    entity_id: input_select.scene_library
                state:
                  - value: "🔴 OFF"
                    styles:
                      card:
                        - border: 1px solid rgba(244, 67, 54, 0.6)
                        - background: rgba(244, 67, 54, 0.18)
                      icon:
                        - color: rgb(244, 67, 54)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_library
                template: scene_chip
                name: Bright
                icon: mdi:white-balance-sunny
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "☀️ BRIGHT"
                  target:
                    entity_id: input_select.scene_library
                state:
                  - value: "☀️ BRIGHT"
                    styles:
                      card:
                        - border: 1px solid rgba(255, 193, 7, 0.55)
                        - background: rgba(255, 193, 7, 0.22)
                      icon:
                        - color: rgb(255, 193, 7)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_library
                template: scene_chip
                name: Warm
                icon: mdi:weather-partly-cloudy
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🌤️ WARM"
                  target:
                    entity_id: input_select.scene_library
                state:
                  - value: "🌤️ WARM"
                    styles:
                      card:
                        - border: 1px solid rgba(255, 152, 0, 0.55)
                        - background: rgba(255, 152, 0, 0.22)
                      icon:
                        - color: rgb(255, 152, 0)
                      name:
                        - color: var(--primary-text-color)
              - type: custom:button-card
                entity: input_select.scene_library
                template: scene_chip
                name: Clean
                icon: mdi:broom
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  data:
                    option: "🧹 CLEAN"
                  target:
                    entity_id: input_select.scene_library
                state:
                  - value: "🧹 CLEAN"
                    styles:
                      card:
                        - border: 1px solid rgba(0, 191, 165, 0.55)
                        - background: rgba(0, 191, 165, 0.22)
                      icon:
                        - color: rgb(0, 191, 165)
                      name:
                        - color: var(--primary-text-color)

          - type: grid
            columns: 3
            square: false
            cards:
              - type: custom:button-card
                template: setpoint_action
                name: Cooler
                label: "-0.5 °C"
                icon: mdi:thermometer-minus
                tap_action:
                  action: call-service
                  service: script.setpoint_library_dec
                styles:
                  icon:
                    - color: rgb(41, 121, 255)
                  name:
                    - color: var(--primary-text-color)
                  label:
                    - color: var(--secondary-text-color)
              - type: custom:button-card
                template: setpoint_display
                entity: input_number.temp_library_setpoint
                icon: mdi:radiator
                name: Setpoint
                styles:
                  icon:
                    - color: rgb(255, 152, 0)
              - type: custom:button-card
                template: setpoint_action
                name: Warmer
                label: "+0.5 °C"
                icon: mdi:thermometer-plus
                tap_action:
                  action: call-service
                  service: script.setpoint_library_inc
                styles:
                  icon:
                    - color: rgb(255, 111, 0)
                  name:
                    - color: var(--primary-text-color)
                  label:
                    - color: var(--secondary-text-color)

          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:button-card
                template: info_chip
                entity: input_boolean.presence_library
                name: Occupancy
                icon: mdi:account-group
                state_display: >
                  [[[ return entity && entity.state === 'on' ? 'Occupied' : 'Vacant'; ]]]
                state:
                  - value: "on"
                    styles:
                      card:
                        - border: 1px solid rgba(0, 150, 136, 0.55)
                        - background: rgba(0, 150, 136, 0.15)
                      icon:
                        - color: rgb(0, 150, 136)
                      name:
                        - color: var(--primary-text-color)
                      state:
                        - color: var(--primary-text-color)
                  - value: "off"
                    styles:
                      card:
                        - border: 1px solid rgba(var(--rgb-secondary-text-color), 0.18)
                        - background: rgba(var(--rgb-card-background-color), 0.9)
                      icon:
                        - color: rgba(var(--rgb-secondary-text-color), 0.6)
                      state:
                        - color: rgba(var(--rgb-secondary-text-color), 0.85)
              - type: custom:button-card
                template: info_chip
                entity: sensor.library_co2
                name: CO₂
                icon: mdi:molecule-co2
                state_display: >
                  [[[ const value = Number(entity?.state); return Number.isFinite(value) ? `${value} ppm` : '—'; ]]]
                state:
                  - operator: template
                    value: >
                      [[[ return Number(entity?.state) >= 1000; ]]]
                    styles:
                      card:
                        - border: 1px solid rgba(244, 67, 54, 0.55)
                        - background: rgba(244, 67, 54, 0.16)
                      icon:
                        - color: rgb(244, 67, 54)
                      state:
                        - color: rgb(244, 67, 54)

          - type: custom:mushroom-cover-card
            entity: cover.library_blind
            name: Library Blind
            show_position_control: true
            show_buttons_control: true
            fill_container: true
            tap_action: none
            hold_action: none
            double_tap_action: none
